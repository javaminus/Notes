## 问题：Redis BitMap 和 HyperLogLog 的原理是什么？分别适合哪些实际应用场景？

### 详细解释（结合场景，含通俗例子）

#### 1. BitMap

**原理：**  
BitMap 是用二进制位（bit）来高效存储和统计大量布尔信息的数据结构，本质上是一个超长的位数组。每个 bit 只能是 0 或 1，占用极少内存。

**典型应用场景：**
- **用户签到统计**：每天用一个 bit 记录用户是否签到，1 代表已签到，0 代表未签到。
- **活跃用户统计**：用用户 ID 作为偏移量，统计某天哪些用户活跃。
- **去重统计**：大规模用户唯一行为的标记，如广告曝光、活动参与等。

**通俗例子：**
想象有一亿个用户，每人是否签到用一张纸上一个小格记录（bit）。用 BitMap 只需几 MB 内存即可实现签到情况查询与统计，非常高效。

---

#### 2. HyperLogLog

**原理：**  
HyperLogLog 是一种基于概率算法的数据结构，用于近似统计海量数据的基数（即去重后元素的数量），但只需极小内存（通常 12KB 左右）。

**典型应用场景：**
- **独立访客数（UV）统计**：统计网站/APP每日独立访问用户数。
- **大规模数据去重计数**：如广告曝光去重、独立 IP 统计。
- **日志分析**：高频、高并发数据流中的去重场景。

**通俗例子：**
你要统计一年内全国所有进出商场的人数，传统方式要记住每个人信息，内存爆炸。HyperLogLog 用概率算法“采样”特征，能用很小空间近似估算人数，误差极小。

---

### 总结性回答（复习提示）

- **BitMap 适合大规模布尔统计（如签到、活跃统计），节省空间，支持位运算。**
- **HyperLogLog 适合大规模去重计数（如UV统计），空间极小但有一定误差。**
- **二者都是 Redis 的“以空间换效率”的典型高阶数据结构，适用于高并发大数据量的统计场景。**


# Redis 和 MySQL 的一次普通查询，RT 在什么范围内是合理的？

## Redis 查询 RT（响应时间）

- **Redis 是内存数据库**，查询速度极快。
- **简单命令（GET/SET）**：
  - 纯命令执行耗时：**0.1ms ~ 1ms**（100~1000微秒）为主流
  - 复杂命令（如 ZADD、HSET）：**1ms ~ 5ms** 内
- **阿里云/腾讯云等云Redis P99**：基本都在**1ms以内**
- **总RT = 命令耗时 + 网络耗时**
  - 局域网：单次RTT 0.1~2ms，总RT通常**1~2ms**
  - 广域网：RTT 10~100ms，网络为主，RT随距离增加

## MySQL 查询 RT（响应时间）

- **MySQL 是磁盘数据库**，速度慢于Redis
- **极致场景（主键索引、命中Buffer Pool，无Join）**：
  - 纯SQL执行耗时：**1ms ~ 2ms**（和Redis接近）
- **常规索引查询（无Join、命中缓存）**：
  - 执行耗时：**2ms ~ 20ms**
- **复杂SQL/未命中缓存/磁盘IO**：
  - 可能**几十ms ~ 数百ms**
- **经验标准**：
  - **<200ms**：性能优秀
  - **200ms~500ms**：较好
  - **>1s**：属于慢SQL，需优化

- **总RT = SQL执行 + 网络耗时**
  - 局域网：SQL查询通常**2~20ms**，加上网络RTT，**5~30ms**都可接受
  - 跨省、跨国：网络为主，RT会显著增加

## 网络耗时参考

- 局域网：**0.1~2ms**
- 同城数据中心：**1~5ms**
- 跨省：**20~30ms**
- 跨国：**100~150ms**

## 总结表

| 查询类型      | 推荐RT范围（ms） | 说明                       |
| ------------- | ---------------- | -------------------------- |
| Redis GET/SET | 0.1 ~ 1          | 云Redis P99 < 1ms          |
| MySQL主键查   | 1 ~ 2            | 命中Buffer Pool            |
| MySQL一般查   | 2 ~ 20           | 命中索引，无Join，无磁盘IO |
| 慢SQL         | > 1000           | 需优化                     |

> 💡 **一句话理解：Redis查询P99在1ms以内，MySQL主键/索引查询2~20ms正常，复杂SQL<200ms较好，超过1s算慢SQL。所有耗时都需加上网络延迟。**
# 银行系统实时性要求高，如何选择垃圾回收器（GC）？

银行系统对实时性要求高，意味着**对GC停顿（STW）时间要求极低**，需优先选择**低延迟垃圾回收器**。

---

## 1️⃣ 选型原则

- 优先选用**低延迟/实时GC**，即使吞吐量略有损失
- 跳过Serial GC、Parallel GC（这些以高吞吐为主，停顿时间长）
- 推荐使用**并发/并行GC**，如 G1、ZGC、Shenandoah、CMS

---

## 2️⃣ 根据JDK版本选择

| JDK版本       | 推荐GC类型        | 特点/说明                              |
| ------------- | ----------------- | -------------------------------------- |
| JDK 12 及以上 | Shenandoah 或 ZGC | 超低延迟，STW常<10ms，适合超大堆       |
| JDK 11        | ZGC               | 超低延迟，STW常<10ms                   |
| JDK 7~10      | G1                | 低停顿，堆4G以上效果最好，STW 10~100ms |
| JDK 6~7       | CMS               | 并发收集，停顿时间短于Parallel GC      |

---

## 3️⃣ 推荐理由

- **ZGC/Shenandoah**（JDK 11/12+）：最新一代低延迟GC，STW极短，适合对延迟极敏感的金融、交易等系统
- **G1 GC**（JDK 7+）：能将停顿时间控制在可预测范围（如10~100ms），适合大堆、延迟敏感场景
- **CMS GC**（JDK 6/7）：比Parallel GC更关注停顿时间，但已被G1替代，优先级低于G1

---

## 4️⃣ 典型GC参数举例

- **G1 GC**：
  ```
  -XX:+UseG1GC
  -XX:MaxGCPauseMillis=50
  ```
- **ZGC**（JDK 11+）：
  ```
  -XX:+UseZGC
  ```
- **Shenandoah**（JDK 12+）：
  ```
  -XX:+UseShenandoahGC
  ```

---

## 5️⃣ 总结

- 首选超低延迟GC（ZGC、Shenandoah），其次用G1，最后CMS
- 实时性（低停顿） > 吞吐量
- 配合合理JVM参数调优，实际压测验证GC效果

> 💡 **一句话总结：银行等高实时性系统应优先选择ZGC、Shenandoah（JDK 11/12+），或G1（JDK 7+），以最小化GC停顿时间，保证系统低延迟响应。**
### 为什么不推荐使用外键？

1. **影响性能**：外键约束会增加数据库写入（插入、更新、删除）时的开销，每次操作都要校验引用完整性，影响高并发场景下的性能。
2. **分布式扩展困难**：在分库分表、分布式数据库架构下，外键无法跨库实现，影响系统扩展性。
3. **数据迁移和维护复杂**：带有外键的表在数据迁移、备份、还原时处理更复杂，容易引发数据一致性和维护问题。
4. **业务灵活性不足**：某些业务可能需要临时“脏数据”或灵活处理，外键约束会阻碍。

---

### 替代方案

通常通过**应用层保证数据一致性**来替代数据库外键。

**常用做法：**
- 通过代码（如插入、删除、更新时）先检查父表是否存在相关数据，保证引用关系；
- 建立唯一索引等辅助约束；
- 定期用脚本或任务检查数据一致性，及时修复脏数据。

---

### 举例说明

假设有订单表（orders）和用户表（users）：

**不用外键时的做法：**
- 插入订单前，应用先查询users表，确认用户存在。
- 删除用户时，应用先检查orders表有无相关订单，再决定是否允许删除或进行级联删除。

**伪代码示例：**

```python
# 插入订单前
if db.users.find(user_id):
    db.orders.insert(order)
else:
    raise Exception("用户不存在")

# 删除用户前
if not db.orders.find(user_id=user_id):
    db.users.delete(user_id)
else:
    raise Exception("该用户有订单，不能删除")
```

---

**总结：**
> 大型系统常用应用层控制数据一致性替代外键，提升性能与扩展性，同时通过代码校验和定期脚本维持数据质量。

如需更详细方案或实际SQL写法可追问！
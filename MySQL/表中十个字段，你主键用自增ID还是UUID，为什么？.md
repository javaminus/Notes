## 表中十个字段，主键用自增ID还是UUID？为什么？

### 1. 自增ID（INT/BIGINT）

**优点：**
- **存储空间小**：通常4字节(INT)或8字节(BIGINT)，比UUID节省空间。
- **索引效率高**：B+树索引插入时总是递增，写入性能好，页分裂少。
- **查询更快**：主键较短，索引结构更小，查询效率高。
- **自解释性强**：数据自增长，便于观察和追踪。

**缺点：**
- **不适合分布式生成**：多库多表情况下自增ID可能冲突，需要额外协调。
- **有些场景容易被“猜测”数据量和增长速度**。

---

### 2. UUID（如CHAR(36)或BINARY(16)）

**优点：**
- **分布式唯一性好**：各节点独立生成，易于数据合并、迁移。
- **安全性强**：难以猜测数据量和顺序。
- **适合业务层直接生成主键**。

**缺点：**
- **存储空间大**：通常16字节或36字节，比自增ID大很多（表大时影响明显）。
- **索引性能差**：UUID无序，会导致B+树频繁分裂，写入慢，索引膨胀。
- **查询效率低**：主键、索引变大，磁盘IO增加。

---

### 3. 场景选择建议

- **大多数情况下（如单库、单表或数据量不太大）优先用自增ID**，性能和存储效率更高。
- **分布式、需要全局唯一ID的场景（如微服务、多库多表）可以考虑UUID或雪花算法等有序全局ID**。

---

### 4. 真实面试建议

- 如果没有特殊分布式需求，建议用自增ID，理由：**空间小、性能高、索引友好**。
- 如果一定要用UUID，建议用BINARY(16)存储且采用有序UUID（如UUIDv7、雪花ID），减少性能损耗。

---

## 总结性回答/提示词

> **常规业务表建议自增ID做主键，因其存储更省、索引效率高；只有分布式/多源数据合并等特殊场景才用UUID，但会带来空间和性能损耗。**

---

## 面试官可能追问

1. **如果用了UUID，如何优化性能？**  
   - 用BINARY(16)代替CHAR(36)存储；用有序UUID算法（如UUIDv7、雪花ID）；主键不用UUID可做唯一索引。

2. **能否用自增ID+唯一业务字段做联合主键？**  
   - 可以，但通常不推荐。自增ID做主键，业务字段加唯一约束即可。

3. **自增ID主键和唯一索引有什么区别？**  
   - 主键唯一且不能为空且聚簇索引，唯一索引只保证唯一可为空。

---
# 例子

> 反范式（也叫反规范化或非规范化）是在数据库设计中故意引入冗余数据的做法，与传统的范式化（即1NF、2NF、3NF等）正好相反。
>
> 通常在进行范式化设计时，主要目标是减少数据冗余，确保数据一致性和完整性。然而，过度的范式化会导致在查询复杂数据时需要做大量的联接（JOIN），这可能会影响查询性能。为了优化性能，尤其是在读操作比较频繁的场景下，可以采用反范式设计。其主要特点包括：
>
> 1. 在表中存储冗余数据，以减少或消除复杂的联接操作。
> 2. 牺牲部分数据一致性（需要额外的措施确保冗余数据同步），从而提高查询效率。
> 3. 适合读多写少的场景，因为写操作需要更多的同步和数据更新工作。
>
> 总结来说，反范式是一种为了优化查询性能而在设计上有意引入冗余数据的方法，但其代价是增加了数据不一致的风险和维护数据冗余的一致性成本。

---

**第一范式（1NF）：字段不可再分**
- 例子（不符合1NF）：  
  学生表  
  | 学号 | 姓名 | 电话号码                |
  | ---- | ---- | ----------------------- |
  | 1    | 张三 | 13800138000,13900139000 |
  

  上表中“电话号码”包含了多个值，不满足1NF。

- 例子（符合1NF）：  
  | 学号 | 姓名 | 电话号码    |
  | ---- | ---- | ----------- |
  | 1    | 张三 | 13800138000 |
  | 1    | 张三 | 13900139000 |
  

  字段不可再分，每个格子只存一个值，满足1NF。

---

**第二范式（2NF）：消除部分依赖**（表中的所有非主属性必须完全依赖于主键 ）

- 例子（不符合2NF）：  
  课程成绩表  
  | 学号 | 课程 | 教师   | 成绩 |
  | ---- | ---- | ------ | ---- |
  | 1    | 数学 | 王老师 | 90   |
  | 1    | 英语 | 李老师 | 88   |
  

  教师只和课程有关，但表的主键是“学号+课程”，教师对主键部分依赖，不满足2NF。

- 例子（符合2NF）：  
  拆成两张表：  
  课程成绩表  
  | 学号 | 课程 | 成绩 |
  | ---- | ---- | ---- |
  | 1    | 数学 | 90   |
  | 1    | 英语 | 88   |
  

  课程教师表  

  | 课程 | 教师   |
  | ---- | ------ |
  | 数学 | 王老师 |
  | 英语 | 李老师 |
  

  消除了部分依赖，满足2NF。

---

**第三范式（3NF）：消除传递依赖**
- 例子（不符合3NF）：  
  学生信息表  
  | 学号 | 姓名 | 班级编号 | 班级名称 |
  | ---- | ---- | -------- | -------- |
  | 1    | 张三 | 101      | 一班     |
  

   “班级名称”依赖于“班级编号”，“班级编号”又依赖于主键“学号”，存在传递依赖，不满足3NF。

- 例子（符合3NF）：  
  学生表  
  | 学号 | 姓名 | 班级编号 |
  | ---- | ---- | -------- |
  | 1    | 张三 | 101      |
  

  班级表  

  | 班级编号 | 班级名称 |
  | -------- | -------- |
  | 101      | 一班     |
  

   消除了传递依赖，满足3NF。

---

**总结：**  
通过逐步分解和拆分表结构，范式规范能让表结构更合理，减少数据冗余和异常。
## 打开百度首页后的网络过程

---

### 1. DNS 解析

- 用户在浏览器输入 `www.baidu.com`，浏览器先查找本地缓存是否有域名对应的 IP。
- 如果没有，操作系统会查询本地 hosts 文件和 DNS 缓存，最后向 DNS 服务器发起递归查询，获取百度服务器的 IP 地址。

---

### 2. 建立 TCP 连接（三次握手）

- 浏览器通过获得的 IP 地址，与百度服务器建立 TCP 连接。
- 过程采用“三次握手”以保证连接的可靠性。

---

### 3. 建立 TLS/SSL 连接（如为 HTTPS）

- 如果使用 HTTPS，TCP 建立后，浏览器和服务器进行 TLS/SSL 握手，协商加密算法、交换密钥，并验证服务器身份，建立安全通道。

---

### 4. 发送 HTTP 请求

- 浏览器向服务器发送 HTTP（或 HTTPS）请求报文，通常为 GET 请求，请求首页资源（如 GET /）。
- 请求头包含 User-Agent、Cookie、Accept 等信息。

---

### 5. 服务器处理请求并响应

- 服务器收到请求后，查找首页资源，生成响应内容（HTML 文件）。
- 服务器将响应数据通过 HTTP 响应报文返回给浏览器，包含状态码、响应头和 HTML 正文。

---

### 6. 浏览器解析 HTML，发送资源请求

- 浏览器收到 HTML 后开始解析，遇到 CSS、JS、图片等资源链接，会并发发起新的 HTTP 请求拉取这些资源。
- 这些请求重复第 4~5 步。

---

### 7. 渲染页面

- 浏览器解析所有资源，构建 DOM、CSSOM，生成渲染树，布局和绘制页面，执行 JS，最终呈现完整的百度首页。

---

## 总结流程图

1. 域名解析（DNS）  
2. 建立 TCP 连接（3 次握手）  
3. 建立 TLS/SSL（如 HTTPS）  
4. 发送 HTTP 请求  
5. 服务器响应  
6. 浏览器解析 HTML 并请求资源  
7. 渲染页面，显示首页  
好的，继续补充一个高频MySQL面试题，按照“问题+详细解释（结合场景，通俗例子）+总结性回答/提示词”的结构：

---

**问题：MySQL中为什么需要分库分表，以及常见的分库分表策略有哪些？**

**详细解释（结合场景，通俗例子）：**  
随着业务数据量增长，单表数据达到千万甚至上亿行时，单库单表的查询、写入、备份和维护都会变得非常慢，数据库性能显著下降。为了解决单库单表的性能和容量瓶颈，通常会采用分库分表的方式，把数据拆分存储到多个数据库或多张表中。

常见的分库分表策略有：
- 按范围分（如每100万条为一表）
- 按哈希取模分（如user_id % 4分到4张表）
- 按时间分（如按年月建表）
- 按业务逻辑分（如不同业务线分库）

**通俗例子：**  
就像学校把一个年级的学生分到不同的班级，如果所有学生都挤在一个班级，老师管理和点名都很困难，分班后每个班人数变少，管理效率提升。

**总结性回答/提示词：**  
分库分表：为解决单表单库性能瓶颈，常用范围、哈希、时间、逻辑分表策略。

---

如需继续补充，请随时告知！

## 面试官可能追问的问题与答案

### 1. 分库分表后，如何保证主键唯一性？

**答：**  
通常采用全局唯一ID方案（如雪花算法、UUID、数据库自增ID加库表号拼接等），避免不同表或库内出现主键冲突。

---

### 2. 分库分表后，如何进行跨分片的查询和聚合操作？

**答：**  
需要在应用层进行分片路由和结果聚合，或借助中间件（如MyCat、ShardingSphere等）自动完成分片操作和结果合并。部分复杂聚合操作可能性能下降。

---

### 3. 分库分表如何实现事务和数据的一致性？

**答：**  
单分片内可用本地事务。跨分片事务可用分布式事务协议（如XA、TCC、SAGA等），但实现和性能都比单库事务复杂，实际业务上尽量减少强一致需求。

---

### 4. 分库分表后如何做数据迁移和扩容？

**答：**  
可通过数据迁移工具或脚本，将某些分片的数据平滑迁移到新库新表，并更新路由规则。中间件支持在线扩容和无缝切换。

---

### 5. 分库分表有哪些常见的技术实现方案？

**答：**  
常见有应用层自定义分片、中间件（如ShardingSphere、MyCat、Cobar）、云数据库自带分片（如PolarDB、TiDB）等。

---

### 6. 分库分表会带来哪些新问题？

**答：**  
- 跨库/表事务难实现  
- 跨分片聚合查询复杂  
- 运维、扩容、监控复杂度提升  
- 路由和分片逻辑需维护，代码侵入性增强
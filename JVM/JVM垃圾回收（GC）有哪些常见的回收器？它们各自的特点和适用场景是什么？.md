## 问题：JVM垃圾回收（GC）有哪些常见的回收器？它们各自的特点和适用场景是什么？

### 详细解释

JVM 提供了多种垃圾回收器（GC），每种回收器针对不同应用场景和性能需求，采取了不同的回收策略。以下是主流 GC 的分类、特点与典型适用场景。

#### 1. Serial（串行）GC

- **特点**：单线程回收，GC 时所有用户线程暂停（Stop-The-World），简单高效，开销低。
- **适用**：小型应用、单核或内存小的环境（如嵌入式设备、客户端应用）。

#### 2. ParNew（并行新生代）GC

- **特点**：新生代并行回收，老年代需配合 CMS；多线程处理新生代垃圾收集。
- **适用**：与 CMS 搭配使用，适合多核服务器。

#### 3. Parallel Scavenge（吞吐量优先）GC

- **特点**：新生代和老年代都可并行回收（配合 Parallel Old），目标是高吞吐量，GC 可配置最大停顿时间和吞吐量。
- **适用**：注重任务处理总量且停顿时间要求不高的后台批处理、数据分析等。

#### 4. CMS（Concurrent Mark Sweep，并发标记清除）GC

- **特点**：老年代并发回收，尽量减少停顿时间，GC 大部分阶段与用户线程并发执行。
- **缺点**：会有“浮动垃圾”，需要“remark”阶段短暂停顿，内存碎片化严重。
- **适用**：对响应时间敏感的Web服务、互联网业务等。

#### 5. G1（Garbage First）GC

- **特点**：面向服务端应用，堆空间划分为多个Region，混合新生代和老年代管理，支持预测最大停顿时间，适合大堆高并发。
- **优点**：低停顿、高吞吐、易配置。
- **适用**：JDK9及以后推荐的服务端GC，适合对停顿时间有要求的大型应用。

#### 6. ZGC（低延迟GC，JDK11+）

- **特点**：支持TB级大堆，GC停顿时间通常低于10ms，基于“着色指针”并发回收。
- **适用**：极致低延迟场景，如金融、在线交易、实时数据处理等。

#### 7. Shenandoah（低延迟GC，JDK12+）

- **特点**：Red Hat推出的低延迟GC，回收和应用线程几乎完全并发，停顿时间与堆大小无关。
- **适用**：大型内存、低延迟需求的业务。

#### 8. 典型GC选择建议

- **小型单机/开发环境**：Serial GC
- **高并发 Web/应用服务器**：G1 GC（首选）、CMS（老项目）、Parallel GC（吞吐量优先）
- **极致低延迟/大内存**：ZGC、Shenandoah

#### 9. 常用JVM参数

- `-XX:+UseSerialGC`、`-XX:+UseParallelGC`、`-XX:+UseParallelOldGC`
- `-XX:+UseConcMarkSweepGC`
- `-XX:+UseG1GC`
- `-XX:+UseZGC`
- `-XX:+UseShenandoahGC`

### 总结性回答/提示词

- GC有串行、并行、并发、低延迟多种，按业务选型
- 响应时间敏感选CMS/G1，吞吐量优先选Parallel，高并发/大堆优先选G1、ZGC、Shenandoah
- 复习提示：**“G1服务器首选，ZGC低延迟，CMS老年代并发，Parallel吞吐量优先”**
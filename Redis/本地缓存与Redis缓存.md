本地缓存（Local Cache）和 Redis 缓存是两种不同的缓存方案，它们的主要区别如下：

------

## **1. 概念**

- **本地缓存（Local Cache）**：存储在**应用服务器的内存**中，通常使用 **JVM 内存（如 HashMap、Guava Cache、Caffeine）** 进行缓存。
- **Redis 缓存（分布式缓存）**：存储在**独立的 Redis 服务器**上，所有应用实例共享同一个缓存。

------

## **2. 区别对比**

| 维度             | 本地缓存（Local Cache）                                | Redis 缓存（分布式缓存）                  |
| ---------------- | ------------------------------------------------------ | ----------------------------------------- |
| **存储位置**     | **应用服务器内存**                                     | **独立 Redis 服务器**                     |
| **访问速度**     | **纳秒级（极快）**，数据直接在内存中                   | **毫秒级（较快）**，需要网络访问          |
| **适用场景**     | 低并发、单机应用，如本地计算缓存                       | 高并发、分布式应用，如会话共享、排行榜等  |
| **数据一致性**   | **适用于单实例**，多实例不共享数据，可能造成数据不一致 | **多实例共享**，全局数据一致              |
| **扩展性**       | 依赖服务器内存大小，难以横向扩展                       | **易扩展**，支持分片集群                  |
| **数据持久化**   | **无持久化**，应用重启后数据丢失                       | **支持持久化**（RDB、AOF）                |
| **缓存淘汰策略** | 依赖 Java 代码（如 LRU、FIFO）                         | **自带淘汰策略**（LRU、LFU、TTL 过期）    |
| **抗压能力**     | **高 QPS**（只需本机内存查询）                         | **高并发支持**，但受限于网络与 Redis 负载 |
| **复杂性**       | **简单易用**，直接在内存操作                           | **需要独立部署 Redis**，管理相对复杂      |

------

## **3. 适用场景**

### **本地缓存适用场景**

✅ 适用于 **单机应用**，缓存少量热点数据：

- **计算中间结果缓存**（如 Java 对象、方法调用结果）
- **配置数据缓存**（如系统配置、字典表）
- **短生命周期的数据**（如 API 访问 Token）

### **Redis 缓存适用场景**

✅ 适用于 **分布式应用**，缓存全局共享数据：

- **用户会话管理**（如分布式 Session 共享）
- **热点数据缓存**（如排行榜、秒杀库存）
- **分布式锁**（如 Redisson）
- **消息队列**（如 Redis Pub/Sub）

------

## **4. 结合使用（本地缓存 + Redis）**

可以 **本地缓存 + Redis 结合使用**：

1. **先查本地缓存**（避免 Redis 压力）
2. **本地缓存没有，则查 Redis**（降低数据库压力）
3. **Redis 没有，则查数据库**（缓存穿透时）

示例：

```
// 先查本地缓存
String value = localCache.get(key);
if (value == null) {
    // 本地缓存没有，查 Redis
    value = redisCache.get(key);
    if (value == null) {
        // Redis 也没有，查数据库
        value = database.query(key);
        // 回写 Redis 和本地缓存
        redisCache.set(key, value, 10, TimeUnit.MINUTES);
        localCache.put(key, value);
    }
}
return value;
```

------

## **5. 总结**

- **本地缓存** 适合 **单机、低并发场景**，速度极快，但**数据不共享**。
- **Redis 缓存** 适合 **分布式、高并发场景**，支持**持久化**，但**访问速度比本地缓存稍慢**。
- **最佳实践**：**本地缓存 + Redis 结合使用**，**热点数据走本地缓存**，大规模数据放 Redis 共享。




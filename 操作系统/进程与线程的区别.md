进程与线程的区别

1. 定义不同
- 进程（Process）：操作系统分配资源的基本单位，是程序的一个运行实例，拥有独立的内存空间。
- 线程（Thread）：CPU调度和执行的最小单位，是进程中的一个执行流，线程之间共享进程的资源。

2. 资源占用
- 进程：拥有独立资源（内存、文件句柄等），创建和切换的开销大。
- 线程：同进程内线程共享大部分资源，创建和切换的开销小。

3. 通信方式
- 进程间通信（IPC）如管道、消息队列、共享内存等，复杂且效率低。
- 线程间通信直接通过共享变量进行，简单高效。

4. 稳定性
- 进程崩溃通常不影响其他进程。
- 线程崩溃可能导致整个进程崩溃。

5. 使用场景
- 进程：适合隔离性要求高的场合，如不同应用。
- 线程：适合大量并发、需要共享数据的场合，如高并发服务器。

---

面试官可能追问的面试题及答案

1. 线程和进程各自适合什么场景？
   - 进程适合需要高度隔离、独立运行的任务（如不同应用程序）。
   - 线程适合需要大量并发和资源共享的任务（如Web服务器的多请求处理）。

2. 进程间通信方式有哪些？各自优缺点？
   - 常见方式：管道、消息队列、信号量、共享内存、Socket。
   - 管道简单但只能用于父子进程；消息队列支持消息异步传递；信号量用于同步；共享内存效率高但需同步机制保护；Socket适合分布式通信。

3. 线程间如何实现同步？常用方法？
   - 常用方式有互斥锁（Mutex）、读写锁、信号量（Semaphore）、条件变量（Condition Variable）等。

4. 为什么线程切换比进程切换快？
   - 线程切换只需保存和恢复少量上下文（如寄存器、栈等），而进程切换还涉及内存管理和资源切换，开销更大。

5. 如何理解线程安全？怎么实现？
   - 多线程环境下访问共享资源时不会出现数据错误或状态不一致。常见做法：加锁、使用原子操作、线程安全容器等。

6. 一个进程中有多个线程，如果一个线程崩溃会发生什么？
   - 该线程所在进程可能会受到影响，严重时整个进程崩溃，导致所有线程都终止。

7. 多进程和多线程的优缺点分别是什么？
   - 多进程：稳定性好，资源隔离强，但资源消耗大、通信复杂。
   - 多线程：资源消耗小，通信简单，但稳定性差，易受其他线程影响。

8. 线程池的原理及优缺点？
   - 原理：预先创建一定数量的线程，任务来时分配空闲线程执行，避免频繁创建/销毁线程。
   - 优点：减少系统开销，提高响应速度。
   - 缺点：线程数固定时任务过多会排队，管理复杂。

9. 进程切换和线程切换的原理和性能影响？
   - 进程切换需保存/恢复全部上下文和内存空间映射，开销大。线程切换只需保存/恢复线程上下文，开销小。

10. 多线程下如何保护全局变量？
   - 通过加锁（如Mutex、读写锁）、原子操作、线程安全容器等方式保护全局变量防止竞态条件。

如需详细解析某一题，请告知！
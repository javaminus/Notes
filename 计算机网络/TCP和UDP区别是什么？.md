TCP（Transmission Control Protocol，传输控制协议）和 UDP（User Datagram Protocol，用户数据报协议）是两种常见的传输层协议，区别如下：

---

## 1. 连接方式
- **TCP**：面向连接，需要建立连接（三次握手）后才能通信。
- **UDP**：无连接，不需要建立连接，直接发送数据。

---

## 2. 可靠性
- **TCP**：可靠传输，数据有序、无丢失、无重复（通过确认、重传、序列号等机制保证）。
- **UDP**：不保证可靠性，可能出现丢包、乱序、重复，无确认和重传机制。

---

## 3. 速度与开销
- **TCP**：传输慢一些，开销大（需要维护连接、校验、流量控制等）。
- **UDP**：传输快，开销小（头部只有8字节，结构简单）。

---

## 4. 应用场景
- **TCP**：要求数据可靠、顺序性强的场景，例如：网页浏览（HTTP/HTTPS）、文件传输（FTP）、邮件（SMTP）。
- **UDP**：对实时性要求高、偶尔丢包可接受的场景，例如：视频直播、在线语音、DNS、DHCP、在线游戏。

---

## 5. 流量控制与拥塞控制
- **TCP**：有流量控制和拥塞控制机制。
- **UDP**：没有流量和拥塞控制，应用层需自行处理。

---

## 6. 数据传输方式
- **TCP**：面向字节流，无界限，发送方和接收方数据是一串连续的字节流。
- **UDP**：面向报文，有消息边界，发送多少就接收多少。

---

## 总结表格

|          | TCP                    | UDP                  |
| -------- | ---------------------- | -------------------- |
| 连接方式 | 需连接（三次握手）     | 无连接               |
| 可靠性   | 可靠，保证顺序和无丢失 | 不可靠，可能丢包乱序 |
| 速度     | 较慢                   | 快                   |
| 开销     | 大                     | 小                   |
| 应用场景 | HTTP、FTP、SMTP等      | 视频、语音、DNS等    |
| 控制机制 | 有流量/拥塞控制        | 无                   |
| 传输方式 | 字节流                 | 报文                 |

---

如需更详细的底层原理或代码示例，欢迎继续提问！



## TCP vs UDP —— 面试官深问问题与参考答案

---

### 1. TCP 三次握手和四次挥手的过程及作用是什么？

**参考答案：**  
三次握手用于建立 TCP 连接，保证双方收发能力正常。步骤如下：  
1. 客户端发送 SYN（同步）包，进入 SYN_SEND 状态。  
2. 服务器收到后回复 SYN+ACK，进入 SYN_RECV 状态。  
3. 客户端收到后回复 ACK，进入 ESTABLISHED 状态，服务器收到 ACK 后也进入 ESTABLISHED，连接建立完成。

四次挥手用于断开连接，确保双方数据都已收发完毕。步骤如下：  
1. 主动方发送 FIN，进入 FIN_WAIT_1。  
2. 被动方收到后回复 ACK，进入 CLOSE_WAIT；主动方进入 FIN_WAIT_2。  
3. 被动方数据发完后，发送 FIN，进入 LAST_ACK。  
4. 主动方收到 FIN 后回复 ACK，进入 TIME_WAIT，等待一段时间后彻底断开。

---

### 2. TCP 为什么可靠？具体有哪些机制保证可靠性？

**参考答案：**  
TCP 通过序列号、确认应答（ACK）、重传机制、超时重传、流量控制（窗口）、拥塞控制等多种机制，保证数据无丢失、无重复、顺序到达，确保传输可靠。

---

### 3. UDP 为什么更适合实时应用？如果丢包怎么办？

**参考答案：**  
UDP 传输无连接、无确认，延迟低，适合实时性要求高的应用（如视频、语音）。丢包由应用层自行处理：如容忍丢包、简单补发、前向纠错等，牺牲部分可靠性换取实时性。

---

### 4. TCP 的流量控制和拥塞控制分别是什么？

**参考答案：**  
- 流量控制：通过滑动窗口，防止发送方过快导致接收方 buffer 溢出。
- 拥塞控制：根据网络拥塞状况（丢包/延迟）动态调整发送速率（如慢启动、拥塞避免、快速恢复、快重传）。

---

### 5. TCP 粘包/拆包是什么？UDP 会有这种现象吗？

**参考答案：**  
TCP 是字节流协议，没有边界，连续发送多个包可能被合并（粘包）或拆开（拆包）接收，需在应用层处理数据边界。UDP 面向报文，每个包独立，不会粘包/拆包。

---

### 6. TCP 的头部有哪些重要字段？UDP 头部结构有何不同？

**参考答案：**  
TCP 头部包括源/目的端口、序列号、确认号、窗口大小、标志位（SYN/ACK/FIN/RST）、校验和等，功能丰富（约20字节起）。  
UDP 头部仅有源/目的端口、长度、校验和，结构简单（8字节）。

---

### 7. TCP 为什么需要 TIME_WAIT 状态？如果没有会怎样？

**参考答案：**  
TIME_WAIT 用于确保最后一个 ACK 能被对方收到，防止老连接数据影响新连接。如果没有该状态，可能导致旧连接的延迟包被误认为新连接数据，造成数据错乱。

---

### 8. 应用层如何选择 TCP 还是 UDP？

**参考答案：**  
需可靠传输、有顺序要求时选 TCP（如文件传输、网页）；需实时性、能容忍丢包时选 UDP（如直播、语音、DNS 查询）。具体按业务需求权衡。

---

## 总结

面试追问时，着重理解 TCP/UDP 的原理、机制和适用场景，能结合三次握手、可靠性、流量/拥塞控制、粘包等细节展开，体现扎实的网络基础。
# 加了分布式锁之后影响并发怎么办？🔒⚡

很多人在面试时会被问到：“你加分布式锁不是影响并发了吗，这样真的合适吗？”其实，这涉及到对**并发**的真正理解。下面用图标和分点梳理一下思路：

---

## 1️⃣ 加分布式锁的目的是什么？

- 🛡️ **防止共享资源的并发冲突**  
  例如：防止重复下单、消息重复投递等。
- 🚫 并不是完全禁止所有的并发，只是**拦截不希望发生的异常并发**（如同一个用户的重复操作）。

---

## 2️⃣ 系统的“并发”到底指什么？

- 📈 **系统并发**（QPS）  
  指单位时间内系统能处理多少请求，既包含了同一个用户的多次请求，也包含不同用户的请求。
- 👤👤 **锁拦住的是“异常并发”**  
  比如同一用户的重复请求，而不是所有请求。

---

## 3️⃣ 锁对并发的影响如何？

- 👍 虽然锁拦住了部分请求，但这些请求本来就是**不希望发生的异常请求**。
- 💡 拦掉异常请求后，系统无需浪费资源去处理这些重复/冲突的操作，反而可以把更多资源用于正常请求。
- 🚀 **整体并发（QPS）并不会下降，反而可能变高**，因为锁提升了系统资源的利用率。

---

## 4️⃣ 总结建议 📝

- ✅ 分布式锁是为了解决特定场景下的数据一致性问题，不是用来完全禁止并发。
- 🌟 合理加锁，拦截异常并发，提升系统健康度和资源利用率。
- 🎯 面试时可以这样回答：  
  > “加分布式锁是为了拦截异常并发，保护关键资源。虽然限制了局部的并发，但系统整体的吞吐量和稳定性反而提升了。”

---

> **一句话总结：**  
> **分布式锁拦住的是“不希望发生的并发”，让系统可以更高效地处理“真正有价值的请求”。**
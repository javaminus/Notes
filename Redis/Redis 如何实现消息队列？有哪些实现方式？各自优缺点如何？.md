## 问题：Redis 如何实现消息队列？有哪些实现方式？各自优缺点如何？

### 详细解释（结合场景，含通俗例子）

Redis 支持多种消息队列实现方式，满足不同业务需求。常见有以下几种：

#### 1. List（列表）实现队列
- **方式**：用 `LPUSH` 入队，`RPOP` 出队，或反向（`RPUSH`/`LPOP`）。可实现简单的消息队列（FIFO）。
- **优点**：实现简单、性能高、支持阻塞（`BLPOP`、`BRPOP`），适合轻量级异步任务。
- **缺点**：无消费确认，消息被取出即删除，易丢失；不支持多消费者分组。

**通俗例子**：像排队打饭，队首的人取完自动离开队伍，没人核对是否饭送到人手上。

---

#### 2. Pub/Sub（发布订阅）实现消息推送
- **方式**：生产者通过 `PUBLISH` 发送消息，所有订阅该频道（`SUBSCRIBE`）的消费者都能实时收到。
- **优点**：实时推送，支持多订阅者，适合广播式、即时通信场景。
- **缺点**：消息不持久，断线丢失，不能做消息确认和追溯，不适合要求可靠性的场景。

**通俗例子**：像微信群公告，发出后所有在线群成员都能收到，离线成员无法补收。

---

#### 3. Stream（流）实现消息队列
- **方式**：`XADD` 写入消息，`XREAD` 或消费组（`XREADGROUP`）读取。支持消息持久化、消费确认和消息重试。
- **优点**：支持消费组，消息不丢失，可追溯，支持消息确认和重发，功能接近专业队列（如Kafka）。
- **缺点**：实现复杂度高，学习曲线陡峭，部分高级场景需业务配合。

**通俗例子**：像快递分拣中心，每个包裹都有编号，有分拣组和分拣员，包裹分配给人后需“签收”确认，未签收可重新分配。

---

### 总结性回答（复习提示）

- Redis 可用 List、Pub/Sub、Stream 实现消息队列。
- **List 简单高效但功能基础**，适合轻量任务。
- **Pub/Sub 支持广播但消息不可靠**，适合即时通知。
- **Stream 功能最强，支持消费组与持久化**，适合可靠队列和复杂业务。
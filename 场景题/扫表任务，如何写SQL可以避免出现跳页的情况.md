# æ‰«è¡¨ä»»åŠ¡å¦‚ä½•å†™SQLé¿å…è·³é¡µé—®é¢˜ï¼Ÿ

åœ¨å®šæ—¶ä»»åŠ¡æ‰¹é‡æ‰«æè¡¨æ•°æ®ï¼ˆå¦‚çŠ¶æ€ä¸º INIT çš„ä»»åŠ¡ï¼‰æ—¶ï¼Œå¸¸è§„åˆ†é¡µï¼ˆOFFSET/LIMITï¼‰æ–¹å¼ä¼šå¯¼è‡´**è·³é¡µ**é—®é¢˜ï¼š  
- å› ä¸ºæ¯å¤„ç†ä¸€æ‰¹æ•°æ®å°±ä¼šæ›´æ–°å…¶çŠ¶æ€ï¼ˆå¦‚ä» INIT â†’ SUCCESSï¼‰ï¼Œä¸‹æ¬¡åˆ†é¡µæ—¶æ•°æ®æ€»æ•°å‘ç”Ÿå˜åŒ–ï¼ŒOFFSET å°±ä¼šé”™ä½ï¼Œå¯¼è‡´éƒ¨åˆ†æ•°æ®è¢«é—æ¼ï¼ˆè·³é¡µï¼‰ã€‚

---

## è·³é¡µçš„é”™è¯¯åˆ†é¡µSQL

```sql
-- ç¬¬ä¸€é¡µ
SELECT * FROM table WHERE state = 'INIT' ORDER BY id LIMIT 0, 100;

-- ç¬¬äºŒé¡µ
SELECT * FROM table WHERE state = 'INIT' ORDER BY id LIMIT 100, 100;
```
- å¦‚æœç¬¬ä¸€é¡µçš„æŸäº›æ•°æ®è¢«å¤„ç†åçŠ¶æ€å˜æ›´ï¼Œç¬¬äºŒé¡µçš„ OFFSET å°±ä¼šè·³è¿‡æœªå¤„ç†çš„æ•°æ®ã€‚

---

## æ­£ç¡®å†™æ³•ï¼šåŸºäºæ¸¸æ ‡ï¼ˆIDï¼‰æ–¹å¼åˆ†é¡µ

**æ ¸å¿ƒæ€æƒ³**ï¼šæ¯æ¬¡è®°å½•ä¸Šä¸€æ‰¹çš„æœ€å¤§IDï¼Œä¸‹æ¬¡ä»è¯¥IDä¹‹åç»§ç»­æŸ¥ï¼Œä¿è¯æ•°æ®ä¸é‡å¤ä¸é—æ¼ã€‚  
é€‚åˆè‡ªå¢IDæˆ–æœ‰å”¯ä¸€é€’å¢å­—æ®µçš„åœºæ™¯ã€‚

### ç¤ºä¾‹SQL

```sql
-- ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼ˆå‡è®¾last_max_id=0ï¼‰
SELECT * FROM table 
WHERE state = 'INIT' AND id > 0 
ORDER BY id ASC 
LIMIT 100;

-- å‡è®¾æŸ¥åˆ°çš„æœ€å¤§IDä¸º 12345ï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢
SELECT * FROM table 
WHERE state = 'INIT' AND id > 12345 
ORDER BY id ASC 
LIMIT 100;
```
- æ¯æ¬¡å¤„ç†å‰ä¸€æ‰¹æ•°æ®åï¼Œè®°å½•æœ¬æ‰¹æ¬¡æœ€å¤§IDã€‚
- ä¸‹æ¬¡ä»¥ `id > last_max_id` ä¸ºæ¡ä»¶æŸ¥æ–°æ•°æ®ã€‚

---

## æ€»ç»“

- **ä¸ç”¨ OFFSET/LIMIT**ï¼Œé¿å…å› æ•°æ®å˜åŠ¨å¯¼è‡´çš„â€œè·³é¡µâ€æˆ–â€œæ¼æŸ¥â€ã€‚
- ç”¨**æ¸¸æ ‡åˆ†é¡µ**ï¼ˆå¦‚è‡ªå¢IDã€æ—¶é—´æˆ³ç­‰å”¯ä¸€é€’å¢å­—æ®µï¼‰+ LIMITï¼Œä¿è¯æ•°æ®ä¸é‡ä¸æ¼ã€å¤„ç†é«˜æ•ˆã€‚

> ğŸ’¡ **ä¸€å¥è¯æ€»ç»“ï¼šæ‰«è¡¨ä»»åŠ¡åˆ†é¡µæ—¶ç”¨â€œæ¸¸æ ‡åˆ†é¡µâ€è€Œä¸æ˜¯OFFSET/LIMITï¼Œæ¡ä»¶å½¢å¦‚ `id > last_max_id order by id limit N`ï¼Œå¯å½»åº•é¿å…è·³é¡µé—®é¢˜ã€‚**
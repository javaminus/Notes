# 两个不相关的网站A和B，如何实现A登录B也能自动登录？

这实际上是“单点登录（SSO, Single Sign-On）”的典型场景。以下给出常见的几种实现思路：

---

## 1️⃣ 基于Cookie（同域名下适用，**本题不适用**）

- 方案：a.example.com 和 b.example.com 可通过设置主域名Cookie实现共享登录态
- **局限**：不同域名（如a.com和b.com）之间Cookie无法共享

---

## 2️⃣ 基于Token认证（如JWT）

- 实现流程：
  1. 用户在A站登录，服务端签发token（如JWT），返回给前端
  2. 用户访问B站时，将token带上（放在header、url参数等方式）
  3. B站验证token，完成自动登录
- **适用**：不同域名、跨站点
- **注意**：token应有时效，并防止泄露

---

## 3️⃣ 共享Session（分布式Session）

- 方案：A、B站点均采用同一套Session存储（如Redis、数据库）
- 用户登录A后，B站能通过SessionID在后端拿到同一份登录态
- **优点**：只要后端能访问同一个Session存储即可
- **局限**：前端SessionID需能被B站获取（如通过跳转、URL传递等），否则不同域名cookie无法自动带过去

---

## 4️⃣ CAS（Central Authentication Service，认证中心）

- 方案：A、B都接入一个独立的CAS认证中心
- 用户访问A/B，会被重定向到CAS登录，成功后CAS生成票据（ticket），A/B用该ticket换取用户信息
- **适用**：多系统集成，企业内部常见
- **优点**：统一认证、接入成本低
- **缺点**：需要开发和维护认证中心

---

## 5️⃣ OAuth2 / OpenID Connect

- 方案：A、B接入同一个OAuth2授权服务器
- 用户在A登录后，B可通过授权服务器拿到用户的身份信息，实现自动登录
- **适用**：第三方登录、跨站点统一认证
- **优点**：安全、标准、支持授权和认证

---

## 实际工程建议

- **推荐OAuth2/OpenID Connect或CAS**：尤其是不同业务方/团队、完全不同域名。
- **Token方案适合小型/快速集成**：要注意token的安全传递。
- **共享Session适合同一公司/业务线**：需要后端有统一的Session存储和管理。

---

> 面试/设计时，建议能说清楚**各种方案的适用场景、优势与局限**，并能根据实际需求选择合适的单点登录架构。
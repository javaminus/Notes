HTTP/2 在提升 Web 性能上已有很大进步，尤其是引入了**多路复用**、头部压缩等新特性，但仍然存在一些固有问题，主要来自于其底层依赖的 TCP 协议。下面详细总结 HTTP/2 的问题，以及为什么需要 HTTP/3：

---

## HTTP/2 的主要问题

1. **队头阻塞（Head-of-Line Blocking）**
   - 虽然 HTTP/2 支持多路复用，一个连接可以并发多个请求，但因为底层仍然是 TCP，如果某个 TCP 包丢失，后续所有数据包都会被阻塞，直到丢失的包被重传。这种“队头阻塞”会导致所有流都受到影响，增加延迟。

2. **连接建立慢**
   - TCP 连接需要三次握手，HTTPS 还要加上 TLS 握手，引入多次往返延迟（RTT）。在高延迟网络环境下，用户的首包到达时间较长。

3. **移动网络和切换问题**
   - TCP 连接在 IP 地址变化后（如移动设备切换网络时）无法自动迁移，需要重新建立连接。这导致流量浪费和体验下降。

4. **加密集成不彻底**
   - 虽然 HTTP/2 几乎都在 HTTPS 下运行，但加密是应用层实现，协议本身未强制集成 TLS，灵活性和安全性有限。

---

## 为什么需要 HTTP/3？

HTTP/3 采用了 QUIC 协议（基于 UDP），解决了上述问题：

1. **消除队头阻塞**
   - QUIC 的多路复用是在传输层实现的（每个流独立），丢包只影响对应流，不影响其他流，极大降低延迟。

2. **更快的连接建立**
   - QUIC 支持 0-RTT，能实现“零延迟”连接恢复和数据发送，首包速度快。

3. **更好的移动兼容性**
   - QUIC 连接可以在 IP 地址变化后继续使用，无需重新建立连接，适合移动网络环境。

4. **安全性更高**
   - QUIC 协议强制集成 TLS 1.3，所有数据默认加密，安全性提升。

5. **灵活的升级与创新**
   - QUIC 可在用户态快速迭代和升级，协议创新更灵活。

---

## 总结

HTTP/3 通过 QUIC 协议解决了 HTTP/2 在队头阻塞、连接建立速度、移动网络兼容性和安全性等方面的痛点，进一步提升了现代 Web 的性能和用户体验。

如果你需要更技术细节或实际案例，可以继续提问！
**问题：Redis的持久化有哪几种方式？各自的优缺点和适用场景是什么？**

**详细解释（结合场景，通俗例子）：**  
Redis主要有两种持久化机制：**RDB（快照）**和**AOF（追加文件日志）**，也可以混合使用。

1. **RDB（快照持久化）**  
   - **原理**：在指定的时间间隔内（如每隔5分钟或有多少次写操作后），将内存中的数据生成快照（.rdb文件）保存到磁盘。
   - **优点**：恢复速度快，文件体积小，适合做备份、迁移等。
   - **缺点**：如果Redis突然宕机，可能丢失最近一次快照后的数据（数据不够实时）。
   - **场景**：数据安全要求不高、注重恢复速度、需要定期备份。

2. **AOF（追加日志持久化）**  
   - **原理**：以日志形式记录每个写操作，按配置（always/每秒/不主动）追加写入磁盘。Redis重启时可重放AOF日志恢复数据。
   - **优点**：数据安全性更高，可做到秒级丢失甚至0丢失；AOF日志为文本格式，可人工编辑修复。
   - **缺点**：文件体积大，恢复速度慢，长期运行需定期重写AOF文件进行压缩。
   - **场景**：数据安全性要求高，需要追溯操作历史。

3. **混合持久化**（Redis 4.0+）  
   - **原理**：AOF重写时，将RDB快照和AOF结合，既保证恢复速度，也兼顾数据安全。
   - **场景**：既要恢复速度快、又要安全，综合场景。

**通俗例子：**  
RDB像是定期给账本拍照备份，AOF像是每次流水都单独记一笔。混合模式就是既拍照又记流水。

**总结性回答/提示词：**  
Redis持久化有RDB（快照）、AOF（日志）、混合模式。RDB恢复快适合备份，AOF安全性高适合重要数据，混合兼顾性能和安全。
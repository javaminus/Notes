## Redis 常见使用场景

---

### 1. 缓存（最常见）

- 用作数据库、网站、API 的高性能缓存层
- 热点数据高速读取，减轻后端数据库压力，提升响应速度
- 典型应用：用户信息缓存、商品详情缓存、页面缓存、热点排行榜等

---

### 2. 分布式锁

- 利用 Redis 的原子操作和过期机制实现分布式锁（如 setnx、redlock 算法）
- 保证分布式系统下的互斥、幂等、任务排他性等
- 典型应用：秒杀/抢购、任务调度、接口幂等等

---

### 3. 计数器与限流

- 使用 Redis 的自增（INCR）和过期特性实现高并发计数器
- 常用于接口访问频率限制（限流）、UV/PV 统计、点赞/转发/投票计数等

---

### 4. 消息队列

- 利用 List（lpush/rpop）、Stream 等结构实现轻量级消息队列
- 用于异步处理、削峰填谷、任务发布/订阅等场景
- 典型应用：订单异步处理、邮件/短信发送等

---

### 5. 实时排行榜/计分板

- 利用 Sorted Set（ZSet）结构，按分数实时排序
- 典型应用：游戏排行榜、积分榜、实时热搜榜等

---

### 6. 会话存储（Session）

- 存储用户会话信息、Token、登录态等，支持分布式系统统一认证
- 保证会话高可用、快速读写与自动过期

---

### 7. 地理位置应用（Geo）

- Redis 的 GEO 类型支持地理坐标、范围查询、距离计算等
- 典型应用：附近的人/店、地图服务、打车派单等

---

### 8. 发布/订阅（Pub/Sub）

- Redis 内置 Pub/Sub 功能支持消息广播、推送
- 典型应用：聊天室、实时消息推送、系统通知等

---

### 9. 数据共享与分布式协作

- 作为分布式系统中的共享内存或数据交换中心
- 典型应用：配置中心、分布式任务调度、集群数据同步等

---

### 10. 其他场景

- 延迟队列、唯一ID生成、临时数据存储（验证码、临时票据）、全局开关等

---

## 总结

Redis 以其高性能、丰富数据结构和原子操作，广泛应用于缓存、分布式锁、计数、消息队列、排行榜、会话管理等多种高并发、高可用场景，是现代大型系统架构中的重要组件。



## Redis 使用场景——面试官可能深问的问题与参考答案

---

### 1. 为什么要用 Redis 做缓存而不是直接用数据库自带的缓存/内存？

**参考答案：**  
Redis 专为高并发和高速访问设计，内存操作效率极高，且支持丰富数据结构，远超一般数据库缓冲池性能。Redis 可做分布式缓存，具备良好的横向扩展性和灵活的失效/淘汰策略，适合热点数据和高并发场景。

---

### 2. Redis 做分布式锁，有哪些常见实现方式？需要注意什么？

**参考答案：**  
常用 setnx+expire 实现简单分布式锁，或用 Redlock 算法增强可靠性。要注意锁的自动过期（防止死锁）、唯一性（避免误解锁）、高可用（主从一致性）等问题，生产环境建议用官方/成熟客户端实现。

---

### 3. Redis 的消息队列和专业 MQ 比有什么优缺点？

**参考答案：**  
优点：实现简单、延迟低、支持多种数据结构（List、Stream）；适合轻量级异步解耦。  
缺点：不支持消息持久化、事务和复杂路由，消息可靠性和可扩展性不如专业 MQ（如 Kafka、RabbitMQ）。适合对可靠性要求不高的实时/延迟队列场景。

---

### 4. 如何用 Redis 实现限流？滑动窗口和漏桶算法如何落地？

**参考答案：**  
可用 INCR+EXPIRE 实现固定窗口限流；滑动窗口可通过 ZSet 记录时间戳，定期移除过期元素，判断窗口内请求数；漏桶算法可用 List 或定时任务实现。生产建议用 Lua 脚本保证原子性。

---

### 5. Redis GEO 类型常见的实际应用和设计要点是什么？

**参考答案：**  
主要用于地理位置检索，如“附近的人/店铺/打车”。设计时需关注 GEOHASH 精度、范围检索的边界和性能，通常结合业务做距离过滤和排序。

---

### 6. Redis 的排行榜是如何实现的？为什么用 ZSet？

**参考答案：**  
排行榜依赖 ZSet 按分数（score）自动排序，支持高效的插入、更新、范围查询（如前N名）。ZSet 适合动态积分榜、热搜榜、实时排名等需求。

---

### 7. Redis 做会话存储有哪些优缺点？如何保证高可用？

**参考答案：**  
优点：读写快、支持过期、便于分布式共享。  
缺点：内存压力大，易丢失（需主从/持久化保障），与数据库数据一致性需额外处理。高可用可配主从、哨兵或集群。

---

### 8. 实际开发中如何控制 Redis 内存占用和数据淘汰？

**参考答案：**  
可设置 maxmemory 限制总内存，选择合适的淘汰策略（如 LRU、LFU、volatile 等），并定期监控 key 数量与内存使用，避免 OOM。

---

### 9. Redis 作为配置中心或分布式协调器时有哪些注意点？

**参考答案：**  
需保证数据一致性和高可用，避免脑裂。对一致性要求极高的分布式场景建议用 etcd、Zookeeper，Redis 更适合轻量级配置和状态同步。

---

### 10. Redis 在高并发场景下如何保证原子性和一致性？

**参考答案：**  
通过单线程模型、原子命令和 Lua 脚本保证命令执行的原子性。分布式部署时需关注主从一致性和写丢失，必要时结合事务、乐观锁等机制。

---

## 总结

面试官深问时，需结合实际业务，说明 Redis 场景选择的理由、优缺点、实现细节及常见风险和优化方案。